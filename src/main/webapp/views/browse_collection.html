
   
   <div class="section section-lg section-bottom" ng-controller="BrowseCollectionCtrl">
      <div>                    
          <button ng-click="toggleFilter=true" ng-hide="toggleFilter" class="filter-expander">
             <i class="fa fa-search fa-lg white"></i>Search
          </button>
      	  <div class="filter-panel" ng-show="toggleFilter">
      		<div>		         
		          <div class="row-heading row-heading-mt-40">
		            <div>
		              <h3 class="title-sm text-uppercase hr-left text-theme"><i class="fa fa-search fa-lg white"></i>Collection		             
		              	<i ng-click="toggleFilter=false" class="pull-right pointer-cursor fa fa-close fa-lg white"> &nbsp</i>             	          
		              </h3>		             
		            </div>		           
		          </div>
		          <div class="row mb">
			        <div class="col-md-12">
			          <div class="wrapper-form-box">
			            <h3 class="title-sm">Search</h3>
			            <form class="form-horizontal">
			              <div class="form-group">			                
			              	<label for="inputEmail" class="control-label col-sm-3">Project</label>
			                  <div class="col-sm-9">
								<input type="text" class="form-control" ng-model="form.project" placeholder="Project">						           					            						         
			                  </div>			                  
			              </div>
			              <div class="form-group">			                
			              	<label for="inputEmail" class="control-label col-sm-3">Field Manager</label>
			                  <div class="col-sm-9">
								<select class="form-control" ng-model="form.staffIdFieldManager" ng-options="user.contactName as [user.contactName,user.organization].join(' - ') for user in users"></select>					           					            						         
			                  </div>			                  
			              </div>
			              <div class="form-group">			                
			              	<label for="inputEmail" class="control-label col-sm-3">Staff Responsible</label>
			                  <div class="col-sm-9">
								<select class="form-control" ng-model="form.staffidResponsible" ng-options="staff.contactName as [staff.contactName,staff.organization].join(' - ') for staff in staffs"></select>						           					            						         
			                  </div>			                  
			              </div>
			              <div class="form-group">			                
			              	<label for="inputEmail" class="control-label col-sm-3">Project Publication</label>
			                  <div class="col-sm-9">
								<input type="text"  class="form-control" placeholder="Project Publication" ng-model="form.projectPublication">					           					            						         
			                  </div>			                  
			              </div>
			              <div class="form-group">	
			              	<div class="col-sm-12">		                			              			                
								<button type="submit" class="btn btn-primary text-theme-xs pull-right" ng-click="searchCollection(1)">Search</button>
								<button class="btn btn-red text-theme-xs pull-left" ng-click="resetForm()">Reset Form</button>			
							</div>		           					            						         			                		                 
			              </div>			              	             			             
			            </form>
			          </div>
			        </div>
			      </div>
		      </div>  	
      	   </div>

        <div class="row mb">        
          <div class="col-md-12">
		      <div class="col-sm-6 col-sm-offset-3 grid-posts">
		          <!-- POST ITEM 1 -->
		          <div class="row">
		            <div class="col-sm-12">
		            
		            	<!-- Start repeat -->
			            <div class="panel-acc panel-group panel-group-v1 panel-group-icon-v1 icon-right" ng-repeat="collection in collections">			            
						  <div class="panel panel-default panel-collapse-in">
						    <div class="panel-body">
						      					      	
						          <div class="wrapper-post animated zoomIn">		                
					                <div class="wrapper-post-text">
					                  <h3 class="title-lg text-uppercase text-theme">{{collection.project}}
					                   <a href="#/collections/{{collection.collectionId}}"><button ng-show="status.authenticated" class="btn btn-blue btn-sm pull-right"><i class="fa fa-edit">  Edit</i></button></a>
					                  </h3><br>
					                  <div class="row">
					                  	<div class="col-sm-6"><i class="fa fa-file-o"></i> Collection : {{collection.collectionId}}</div>
					                  	<div class="col-sm-6"><i class="fa fa-user"></i> Custodian : <a ng-click="viewStaff(collection.staffidResponsible)">{{collection.staffidResponsible}}</a></div>
					                  </div>
					                  <div class="row">
					                  	<div class="col-sm-6"><i class="fa fa-calendar"></i> Archive Due : {{collection.archiveDue | date:'d/MMM/yyyy'}}</div>
					                  	<div class="col-sm-6"><i class="fa fa-calendar"></i> Project Close : {{collection.archiveDue | date:'d/MMM/yyyy'}}</div>
					                  </div>
					                  <br>
   
				                    <div class="ibox-content">						
				                        <table class="detailTbl">
				                            <thead>
				                            <tr>						                                
				                                <th>Collections</th>
				                                <th>&nbsp</th>						                                						                               
				                            </tr>
				                            </thead>
				                            <tbody>				                           
				                            <tr ng-show="collection.projectPublication">
				                                <th>Project Publication</th>
				                                <td>{{collection.projectPublication}}</td>						                                
				                            </tr>
				                            <tr ng-show="collection.projectResult">
				                                <th>Project Result</th>
				                                <td>{{collection.projectResult}}</td>						                               
				                            </tr>
				                             <tr ng-show="collection.staffIdFieldManager">
				                                <th>Field Manager</th>
				                                <td><a ng-click="viewUser(collection.staffIdFieldManager)">{{collection.staffIdFieldManager}}</a></td>						                               
				                            </tr>
				                            </tbody>
				                        </table>
				                    </div>					                    
				                    <div id="collapse-{{collection.id}}" class="panel-collapse collapse">
				                    
								      <div class="panel-body">
								       <div class="ibox-content">	
								       	 <h4 class="panel-title">List of SubCollection</h4><br>
								         <table class="table lightHeader">
											<thead>
											<tr>
												<th>SubCollection Id</th>
												<th>Location</th>
												<th>Source</th>
												<th>View</th>																				
												<th>Link</th>
											</tr>
											</thead>
											<tbody>
											<tr ng-repeat-start="subcollection in subcollections[collection.collectionId]">
												<td>{{subcollection.subcollectionId}}</td>
												<td>{{subcollection.locationInStorage}}</td>
												<td>{{subcollection.source}}</td>																								
												<td><a onclick="return false;"  href="#" data-toggle="collapse" data-target=".collapse-{{subcollection.subcollectionId}}"><i class="fa fa-eye"></i>View</a></td>
												<td><a href="#/browsesubcollections/{{subcollection.igsn}}"><i class="fa fa-link"> GOTO</i></a></td>
											</tr>	
											<tr ng-repeat-end class="panel-collapse collapse out collapse-{{subcollection.subcollectionId}}">
												<td colspan="5">
													<table class="table table-borderless">
														<tbody>
															<tr>
																<th>Hazardous</th>
																<td>{{subcollection.hazardous}}</td>																
															</tr>
															<tr>
																<th>Old Id</th>
																<td>{{subcollection.oldId}}</td>																
															</tr>
															<tr>
									            				<th>Container Range</th>
									            				<td>{{subcollection.sampleRangeBySubcollection['minContainer']}} - {{subcollection.sampleRangeBySubcollection['maxContainer']}} </td>
									            			</tr>
									            			<tr>
									            				<th>Sample Range</th>
									            				<td>{{subcollection.sampleRangeBySubcollection['minSample']}} - {{subcollection.sampleRangeBySubcollection['maxSample']}}</td>
									            			</tr>
															<tr>
																<th>Storage Type</th>
																<td>{{subcollection.storageType}}</td>																
															</tr>
															<tr>
																<th>Number of Pallets</th>
																<td>{{subcollection.totalPallet}}</td>																
															</tr>															
														</tbody>
													</table>
												</td>
											</tr>
																																
											</tbody>
										  </table>
										</div>
								      </div>
								    </div>				                    				                			                  
				                  <a onclick="return false;" ng-click="getSubCollection(collection.collectionId)" href="#collapse-{{collection.id}}" data-toggle="collapse"  data-target="#collapse-{{collection.id}}" class="text-theme btn btn-primary btn-md">Sub-Collection List</a>					                  
				                </div>
				              </div>
						    </div>
						    
						  </div>
						   <hr class="hr-divider-xs">						  
						</div>		           
						 <!-- end repeat -->
						 
		            </div>
		          </div>
		        	 
		          <!-- PAGINATAION -->
		          <div class="row">
		            <div class="col-sm-6">
		              	<pagination ng-change="pageChanged()" total-items="totalItem" ng-model="currentPages" max-size="5" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages"></pagination>		              
		            </div>		            
		          </div>
		          <div class="row">
		            <div class="col-sm-6">
		              	<pre>Page: {{currentPages}} / {{numPages}}</pre>		              
		            </div>		            
		          </div>
		     </div>   
          </div>         
        </div>
      </div>
    </div>
  
   
